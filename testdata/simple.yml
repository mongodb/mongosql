# How this test case file works:
#
# 1. mongoimport each of these json files under the "data" section 
# into the indicated namespace
#
data:
- ns: test.foo
  json_file: testdata/input/test1.json
- ns: test.baz
  json_file: testdata/input/test2.json

# 2. Start a test server using the following schema mapping, which should
# correspond to the data used in (1)

schema:
- name: test
  tables:
  - table: foo
    collection: test.foo
    pipeline: []
    columns:
    - sqlname: a
      sqltype: int
    - sqlname: b
      sqltype: string
    - sqlname: latitude
      sqltype: int
      name: "loc.0"
    - sqlname: longitude
      sqltype: int
      name: "loc.1"

# 3. Run each of the following queries, and report any that have errors
testcases:
- sql: "SELECT a, b, latitude, longitude from foo"
  expected_types: [int, string, float, float]
  expected: 
    - [1, "hello world!", 124.0, 35.0]
- sql: "SELECT count(*) from foo"
  expected_types: [int]
  expected: 
    - [1]
- sql: "SELECT sum(a) from foo"
  expected_types: [int]
  expected: 
    - [1]
- sql: "SELECT latitude, longitude from foo"
  expected_types: [float, float]
  expected: 
    - [124.0, 35.0]
